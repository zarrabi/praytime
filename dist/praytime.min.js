class PrayTime{constructor(t){this.methods={MWL:{fajr:18,isha:17},ISNA:{fajr:15,isha:15},Egypt:{fajr:19.5,isha:17.5},Makkah:{fajr:18.5,isha:"90 min"},Karachi:{fajr:18,isha:18},Tehran:{fajr:17.7,maghrib:4.5,midnight:"Jafari"},Jafari:{fajr:16,maghrib:4,midnight:"Jafari"},defaults:{isha:14,maghrib:"1 min",midnight:"Standard"}},this.settings={dhuhr:"0 min",asr:"Standard",highLats:"NightMiddle",tune:{},format:"24h",rounding:"nearest",utcOffset:"auto",location:[0,-(new Date).getTimezoneOffset()/4],iterations:1},this.labels=["Fajr","Sunrise","Dhuhr","Asr","Sunset","Maghrib","Isha","Midnight"],this.method(t||"MWL")}method(t){return this.set(this.methods.defaults).set(this.methods[t])}adjust(t){return this.set(t)}location(t){return this.set({location:t})}tune(t){return this.set({tune:t})}round(t){return this.set({rounding:t||"nearest"})}format(t){return this.set({format:t})}set(t){return Object.assign(this.settings,t),this}utcOffset(t){return void 0===t?t="auto":Math.abs(t)<16&&(t*=60),this.set({utcOffset:t})}times(t){if("number"==typeof(t=t||0)){const s=t<1e3?t:0,i=t<1e3?Date.now():t;t=new Date(i+864e5*s)}t.constructor===Date&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()]),this.utcTime=Date.UTC(t[0],t[1]-1,t[2]);const s=this.computeTimes();return this.formatTimes(s),s}getTimes(t,s,i,e,a){const n=isNaN(+i)?"auto":i+(e||0);return this.location(s).utcOffset(n).format(a||"24h"),this.times(t)}setMethod(t){this.method(t)}computeTimes(){let t={fajr:5,sunrise:6,dhuhr:12,asr:13,sunset:18,maghrib:18,isha:18,midnight:24};for(let s=0;s<this.settings.iterations;s++)t=this.processTimes(t);return this.adjustHighLats(t),this.updateTimes(t),this.tuneTimes(t),this.convertTimes(t),t}processTimes(t){const s=this.settings;return{dhuhr:this.midDay(t.dhuhr),fajr:this.angleTime(s.fajr,t.fajr,-1),sunrise:this.angleTime(.833,t.sunrise,-1),sunset:this.angleTime(.833,t.sunset),maghrib:this.angleTime(s.maghrib,t.maghrib),isha:this.angleTime(s.isha,t.isha),asr:this.angleTime(this.asrAngle(s.asr,t.asr),t.asr),midnight:this.midDay(t.midnight)+12}}updateTimes(t){const s=this.settings;if(this.isMin(s.maghrib)&&(t.maghrib=t.sunset+this.value(s.maghrib)/60),this.isMin(s.isha)&&(t.isha=t.maghrib+this.value(s.isha)/60),"Jafari"==s.midnight){const i=this.angleTime(s.fajr,29,-1)+24;t.midnight=(t.sunset+(this.adjusted?t.fajr+24:i))/2}t.dhuhr+=this.value(s.dhuhr)/60}tuneTimes(t){const s=this.settings.tune;for(let i in t)i in s&&(t[i]+=s[i]/60)}convertTimes(t){const s=this.settings.location[1];for(let i in t){const e=t[i]-s/15,a=this.utcTime+Math.floor(36e5*e);t[i]=this.roundTime(a)}}roundTime(t){const s={up:"ceil",down:"floor",nearest:"round"}[this.settings.rounding];if(!s)return t;return 6e4*Math[s](t/6e4)}sunPosition(t){const s=this.settings.location[1],i=this.utcTime/864e5-10957.5+this.value(t)/24-s/360,e=DT.mod(357.529+.98560028*i,360),a=DT.mod(280.459+.98564736*i,360),n=DT.mod(a+1.915*DT.sin(e)+.02*DT.sin(2*e),360),r=23.439-36e-8*i,h=DT.mod(DT.arctan2(DT.cos(r)*DT.sin(n),DT.cos(n))/15,24);return{declination:DT.arcsin(DT.sin(r)*DT.sin(n)),equation:a/15-h}}midDay(t){const s=this.sunPosition(t).equation;return DT.mod(12-s,24)}angleTime(t,s,i){i=i||1;const e=this.settings.location[0],a=this.sunPosition(s).declination,n=-DT.sin(t)-DT.sin(e)*DT.sin(a),r=DT.arccos(n/(DT.cos(e)*DT.cos(a)))/15;return this.midDay(s)+r*i}asrAngle(t,s){const i={Standard:1,Hanafi:2}[t]||this.value(t),e=this.settings.location[0],a=this.sunPosition(s).declination;return-1*DT.arccot(i+DT.tan(Math.abs(e-a)))}adjustHighLats(t){const s=this.settings;if("None"==s.highLats)return;this.adjusted=!1;const i=24+t.sunrise-t.sunset;Object.assign(t,{fajr:this.adjustTime(t.fajr,t.sunrise,s.fajr,i,-1),isha:this.adjustTime(t.isha,t.sunset,s.isha,i),maghrib:this.adjustTime(t.maghrib,t.sunset,s.maghrib,i)})}adjustTime(t,s,i,e,a){a=a||1;const n={NightMiddle:.5,OneSeventh:1/7,AngleBased:1/60*this.value(i)}[this.settings.highLats]*e,r=(t-s)*a;return(isNaN(t)||r>n)&&(t=s+n*a,this.adjusted=!0),t}formatTimes(t){for(let s in t)t[s]=this.formatTime(t[s])}formatTime(t){const s=this.settings.format;return isNaN(t)?"-----":"function"==typeof s?s(t):"x"==s.toLowerCase()?Math.floor(t/("X"==s?1e3:1)):this.timeToString(t,s)}timeToString(t,s){const i=new Date(t),e=this.settings.utcOffset,a="auto"==e?-i.getTimezoneOffset():e,n=60*i.getUTCHours()+i.getUTCMinutes()+a,r=DT.mod(Math.floor(n/60),24),h="12h"==s.toLowerCase()?DT.mod(r-1,12)+1:this.twoDigits(r),o=this.twoDigits(DT.mod(n,60)),u="12h"==s?["AM","PM"][r<12?0:1]:"";return h+":"+o+(u?" "+u:"")}twoDigits(t){return String(t).padStart(2,"0")}value(t){return 1*(t+"").split(/[^0-9.+-]/)[0]}isMin(t){return-1!=(t+"").indexOf("min")}}class DT{static dtr(t){return t*Math.PI/180}static rtd(t){return 180*t/Math.PI}static sin(t){return Math.sin(this.dtr(t))}static cos(t){return Math.cos(this.dtr(t))}static tan(t){return Math.tan(this.dtr(t))}static arcsin(t){return this.rtd(Math.asin(t))}static arccos(t){return this.rtd(Math.acos(t))}static arctan(t){return this.rtd(Math.atan(t))}static arccot(t){return this.rtd(Math.atan(1/t))}static arctan2(t,s){return this.rtd(Math.atan2(t,s))}static mod(t,s){return(t%s+s)%s}}const praytime=new PrayTime;"undefined"!=typeof module&&module.exports&&(module.exports=praytime,module.exports.PrayTime=PrayTime);